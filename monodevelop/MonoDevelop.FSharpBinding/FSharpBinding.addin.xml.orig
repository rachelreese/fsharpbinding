<Addin id="FSharpBinding" namespace="MonoDevelop" name="F# Language Binding"
       author="F# Software Foundation (fsharp.org)" copyright="F# Software Foundation (fsharp.org)" url="http://github.com/fsharp/fsharpbinding"
       description="F# Language Binding (for Xamarin Studio/MonoDevelop INSERT_FSPROJ_MDVERSION4). Install F# before using, see http://fsharp.org" category="Language bindings" version="INSERT_FSPROJ_VERSION">

  <Runtime>
    <Import file="FSharp.Core.dll" />
    <Import file="FSharp.CompilerBinding.dll" />
    <Import assembly="FSharpBinding.dll" />
    <Import assembly="FSharpBinding.Gui.dll" />
    <Import file="FSharp.Compiler.Service.dll" />
    <Import assembly="FantomasLib.dll" />

  <!--INSTALL_DEBUG
    <Import file = "FSharp.CompilerBinding.dll.mdb" />
    <Import file = "FSharpBinding.dll.mdb" />
    <Import file = "FSharpBinding.Gui.dll.mdb" />
  INSTALL_DEBUG-->

    <Import file = "Templates/EmptyFSharpSource.xft.xml" />
    <Import file = "Templates/EmptyFSharpScript.xft.xml" />
    <Import file = "Templates/EmptyFSharpSignature.xft.xml" />
    <Import file = "Templates/FSharpConsoleProject.xpt.xml" />
    <Import file = "Templates/FSharpLibraryProject.xpt.xml" />
    <Import file = "Templates/FSharpTutorialProject.xpt.xml" />
    <Import file = "Templates/FSharpGtkProject.xpt.xml" />
    <Import file = "Templates/AssemblyInfo.xft.xml" />
    <Import file = "Templates/FSharpProjectMvc4Razor.xpt.xml" />
    <Import file = "Templates/FSharpProjectMvc4Razor.windows.xpt.xml" />
    <Import file = "Templates/FSharpNUnitLibraryProject.xpt.xml" />
    <Import file = "Templates/FSharpNUnitTestType.xft.xml" />

    <!--- F# MonoMac templates -->
    <Import file="Templates/MonoMac/MonoMac/MonoMacProject.xpt.xml"/>
    <Import file="Templates/MonoMac/MonoMac/MonoMacProjectEmpty.xpt.xml"/>
    <Import file="Templates/MonoMac/MonoMac/MonoMacApplicationManifest.xft.xml"/>
    <Import file="Templates/MonoMac/MonoMac/MonoMacPlist.xft.xml"/>
    <Import file="Templates/MonoMac/MonoMac/MonoMacApplicationDocumentManifest.xft.xml"/>
    <Import file="Templates/MonoMac/MonoMac/MonoMacWindowWithControllerXib.xft.xml"/>

    <Import file="Templates/MonoMac/XamMac/XamMacProject.xpt.xml"/>
    <Import file="Templates/MonoMac/XamMac/XamMacProjectEmpty.xpt.xml"/>
    <Import file="Templates/MonoMac/XamMac/XamMacApplicationManifest.xft.xml"/>
    <Import file="Templates/MonoMac/XamMac/XamMacPlist.xft.xml"/>
    <Import file="Templates/MonoMac/XamMac/XamMacApplicationDocumentManifest.xft.xml"/>
    <Import file="Templates/MonoMac/XamMac/XamMacWindowWithControllerXib.xft.xml"/>

    <!--- F# Android templates -->
    <Import file = "Templates/Android/MonoDroidActivity.xft.xml" />
    <Import file = "Templates/Android/MonoDroidApplication/AboutAssets.txt" />
    <Import file = "Templates/Android/MonoDroidApplication/AboutResources.txt" />
    <Import file = "Templates/Android/MonoDroidApplication/MainActivity.fs" />
    <Import file = "Templates/Android/MonoDroidApplication/AssemblyInfo.fs" />
    <Import file = "Templates/Android/MonoDroidApplication/Resource.fs" />
    <Import file = "Templates/Android/MonoDroidApplication/Icon-hd.png" />
    <Import file = "Templates/Android/MonoDroidApplication/Icon-ld.png" />
    <Import file = "Templates/Android/MonoDroidApplication/Icon-md.png" />
    <Import file = "Templates/Android/MonoDroidApplication/Main.axml" />
    <Import file = "Templates/Android/MonoDroidApplicationProject.xpt.xml" />
    <Import file = "Templates/Android/MonoDroidApplicationProjectLv12.xpt.xml" />
    <Import file = "Templates/Android/MonoDroidApplicationProjectLv15.xpt.xml" />
    <Import file = "Templates/Android/MonoDroidBroadcastReceiver.xft.xml" />
    <Import file = "Templates/Android/MonoDroidClass.xft.xml" />
    <Import file = "Templates/Android/MonoDroidFragment.xft.xml" />
    <Import file = "Templates/Android/MonoDroidInterface.xft.xml" />
    <Import file = "Templates/Android/MonoDroidLibraryProject.xpt.xml" />
    <Import file = "Templates/Android/MonoDroidOpenGLProject.xpt.xml" />
    <Import file = "Templates/Android/MonoDroidUnitTestProject.xpt.xml" />
    <Import file = "Templates/Android/MonoDroidView.xft.xml" />
    <Import file = "Templates/Android/OpenGLApplication/MainActivity.fs" />
    <Import file = "Templates/Android/OpenGLApplication/GLView1.fs" />
    <Import file = "Templates/Android/OpenGLApplication/Main.axml" />
    <Import file = "Templates/Android/OpenGLApplication/Resource.fs" />
    <Import file = "Templates/Android/UnitTestProject/MainActivity.fs" />
    <Import file = "Templates/Android/UnitTestProject/TestsSample.fs" />

    <!--- F# ios classic templates -->
    <Import file="Templates/ios/Common/Info_iPad.plist.xml" />
    <Import file="Templates/ios/Common/Info_iPhone.plist.xml" />
    <Import file="Templates/ios/Common/Info_Universal.plist.xml" />
    <Import file="Templates/ios/Common/Info_iPad.Storyboard.plist.xml" />
    <Import file="Templates/ios/Common/Info_iPhone.Storyboard.plist.xml" />
    <Import file="Templates/ios/Common/Info_Universal.Storyboard.plist.xml" />
    <Import file="Templates/ios/Common/Entitlements.plist.xml" />
    <Import file="Templates/ios/Common/Default-568h.png" />
    <Import file="Templates/ios/Empty/AppDelegate.fs" />
    <Import file="Templates/ios/Empty/ProjectIPad.xpt.xml" />
    <Import file="Templates/ios/Empty/ProjectIPhone.xpt.xml" />
    <Import file="Templates/ios/Empty/ProjectUniversal.xpt.xml" />
    <Import file="Templates/ios/SingleView/Common/AppDelegate.fs" />
    <Import file="Templates/ios/SingleView/IPad/ViewController.fs" />
    <Import file="Templates/ios/SingleView/IPhone/ViewController.fs" />
    <Import file="Templates/ios/SingleView/Universal/ViewController.fs" />
    <Import file="Templates/ios/SingleView/ProjectIPad.xpt.xml" />
    <Import file="Templates/ios/SingleView/ProjectIPhone.xpt.xml" />
    <Import file="Templates/ios/SingleView/ProjectUniversal.xpt.xml" />
    <Import file="Templates/ios/LibraryProject.xpt.xml" />

    <!--- F# Xamarin.iOS unified templates -->
    <Import file="Templates/Xamarin.iOS/Project/Common/Info_iPad.plist.xml" />
    <Import file="Templates/Xamarin.iOS/Project/Common/Info_iPhone.plist.xml" />
    <Import file="Templates/Xamarin.iOS/Project/Common/Info_Universal.plist.xml" />
    <Import file="Templates/Xamarin.iOS/Project/Common/Info_iPad.Storyboard.plist.xml" />
    <Import file="Templates/Xamarin.iOS/Project/Common/Info_iPhone.Storyboard.plist.xml" />
    <Import file="Templates/Xamarin.iOS/Project/Common/Info_Universal.Storyboard.plist.xml" />
    <Import file="Templates/Xamarin.iOS/Project/Common/Entitlements.plist.xml" />
    <Import file="Templates/Xamarin.iOS/Project/Common/Default-568h.png" />
    <Import file="Templates/Xamarin.iOS/Project/Common/Conversions.fs" />
    <Import file="Templates/Xamarin.iOS/Project/Common/ExtensionAppDelegate.fs" />
    <Import file="Templates/Xamarin.iOS/Project/Empty/AppDelegate.fs" />
    <Import file="Templates/Xamarin.iOS/Project/Empty/ProjectIPad.xpt.xml" />
    <Import file="Templates/Xamarin.iOS/Project/Empty/ProjectIPhone.xpt.xml" />
    <Import file="Templates/Xamarin.iOS/Project/Empty/ProjectUniversal.xpt.xml" />
    <Import file="Templates/Xamarin.iOS/Project/SingleView/Common/AppDelegate.fs" />
    <Import file="Templates/Xamarin.iOS/Project/SingleView/IPad/ViewController.fs" />
    <Import file="Templates/Xamarin.iOS/Project/SingleView/IPhone/ViewController.fs" />
    <Import file="Templates/Xamarin.iOS/Project/SingleView/Universal/ViewController.fs" />
    <Import file="Templates/Xamarin.iOS/Project/SingleView/ProjectIPad.xpt.xml" />
    <Import file="Templates/Xamarin.iOS/Project/SingleView/ProjectIPhone.xpt.xml" />
    <Import file="Templates/Xamarin.iOS/Project/SingleView/ProjectUniversal.xpt.xml" />
    <Import file="Templates/Xamarin.iOS/Project/LibraryProject.xpt.xml" />
    <Import file="Templates/Xamarin.iOS/Project/UnitTests/UnitTestAppDelegate.fs" />
    <Import file="Templates/Xamarin.iOS/Project/UnitTests/UnitTestsProject.xpt.xml" />
    <Import file="Templates/Xamarin.iOS/Project/CustomKeyboardExtension/Info.plist.xml" />
    <Import file="Templates/Xamarin.iOS/Project/CustomKeyboardExtension/KeyboardViewController.fs" />
    <Import file="Templates/Xamarin.iOS/Project/CustomKeyboardExtension/Project.xpt.xml" />

    <!-- Code templates -->
    <Import file = "Templates/FSharp-templates.xml" />

  </Runtime>

  <Dependencies>
    <Addin id="Core" version="INSERT_FSPROJ_MDVERSION4"/>
    <Addin id="Ide" version="INSERT_FSPROJ_MDVERSION4"/>
    <Addin id="SourceEditor2" version="INSERT_FSPROJ_MDVERSION4"/>
    <Addin id="Refactoring" version="INSERT_FSPROJ_MDVERSION4"/>
    <Addin id="NUnit" version="INSERT_FSPROJ_MDVERSION4"/>

  </Dependencies>

  <!-- This updates the old guid to the new one on saving the project -->
  <Extension path = "/MonoDevelop/ProjectModel/MSBuildExtensions">
    <Class class="MonoDevelop.FSharp.CorrectGuidMSBuildExtension"/>
  </Extension>

  <!-- By default projects use the F# 3.1 targets file unless only 3.0 is available on the machine. -->
  <!-- New projects will be created with this targets file. -->
  <Extension path="/MonoDevelop/ProjectModel/MSBuildItemTypes">
    <!--  If FSharp 3.1 is available, use it. Note XS looks for the first DotNetProject node under 'Extension' -->
	<Condition id="MSBuildTargetIsAvailable" target="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" >
      <DotNetProject language="F#" extension="fsproj" guid="{f2a71f9b-5d33-465a-a702-920d77279786}" import="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets"  resourceHandler="MonoDevelop.FSharp.FSharpResourceIdBuilder"/>
	</Condition>

    <!--  If FSharp 3.1 is not available, then use FSharp 3.0  -->
    <DotNetProject language="F#" extension="fsproj" guid="{f2a71f9b-5d33-465a-a702-920d77279786}" import="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets"  resourceHandler="MonoDevelop.FSharp.FSharpResourceIdBuilder"/>
  </Extension>

  <Extension path = "/MonoDevelop/Refactoring/CodeActionSource">
    <Source class ="MonoDevelop.FSharp.NRefactoryCodeActionSource"/>
  </Extension>

  <Extension path="/MonoDevelop/Ide/GlobalOptionsDialog/Other">
    <Section id="FSharpSettings" _label="F# Settings" class = "MonoDevelop.FSharp.FSharpSettingsPanel" />
  </Extension>

  <Extension path="/MonoDevelop/TypeSystem/Parser">
    <Parser class="MonoDevelop.FSharp.FSharpParser"  mimeType = "text/x-fsharp" />
  </Extension>

  <Extension path = "/MonoDevelop/SourceEditor2/TooltipProviders">
    <Class id="LanguageItem" class="MonoDevelop.FSharp.FSharpTooltipProvider" />
  </Extension>

  <Extension path="/MonoDevelop/Ide/TextEditorResolver">
    <Resolver class="MonoDevelop.FSharp.FSharpResolverProvider" mimeType="text/x-fsharp" />
  </Extension>

  <Extension path="/MonoDevelop/Ide/FileFilters">
    <FileFilter id="F#" insertbefore="AllFiles" _label="F# Source Files" extensions="*.fs;*.fsi;*.fsx;*.fsscript"/>
  </Extension>

  <Extension path = "/MonoDevelop/Ide/FileTemplateTypes">
    <FileTemplateType name = "UnformattedFile" class = "MonoDevelop.FSharp.UnformattedTextFileDescriptionTemplate"/>
  </Extension>

  <Extension path="/MonoDevelop/Ide/FileTemplates">
    <FileTemplate id="EmptyFSharpSource" file="Templates/EmptyFSharpSource.xft.xml"/>
    <FileTemplate id="EmptyFSharpScript" file="Templates/EmptyFSharpScript.xft.xml"/>
    <FileTemplate id="EmptyFSharpSignature" file="Templates/EmptyFSharpSignature.xft.xml"/>
    <FileTemplate id="FSharpAssemblyInfo" file="Templates/AssemblyInfo.xft.xml" />
    <FileTemplate id="FSharpNUnitTestType" file="Templates/FSharpNUnitTestType.xft.xml" />
  </Extension>

  <Extension path="/MonoDevelop/Ide/ProjectTemplates">
    <ProjectTemplate id="FSharpConsoleProject" file="Templates/FSharpConsoleProject.xpt.xml"/>
    <ProjectTemplate id="FSharpLibraryProject" file="Templates/FSharpLibraryProject.xpt.xml"/>
    <!-- Only include the tutorial project if an F# 3.0 or 3.1 target is available as this includes F# 3.0 specific features -->
	<ComplexCondition>
		<Or>
			<Condition id="MSBuildTargetIsAvailable" target="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" />
			<Condition id="MSBuildTargetIsAvailable" target="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" />
		</Or>
		<ProjectTemplate id="FSharpTutorialProject" file="Templates/FSharpTutorialProject.xpt.xml"/>
	</ComplexCondition>

    <ProjectTemplate id="FSharpGtkProject" file="Templates/FSharpGtkProject.xpt.xml"/>
    <Condition id="Platform" value="windows">
      <ProjectTemplate id="FSharpMvc4Project" file="Templates/FSharpProjectMvc4Razor.windows.xpt.xml"/>
    </Condition>
    <Condition id="Platform" value="!windows">
      <ProjectTemplate id="FSharpMvc4Project" file="Templates/FSharpProjectMvc4Razor.xpt.xml"/>
    </Condition>
    <ProjectTemplate id="FSharpNUnitLibraryProject" file="Templates/FSharpNUnitLibraryProject.xpt.xml"/>
  </Extension>

  <Extension path = "/MonoDevelop/ProjectModel/SerializableClasses">
    <DataType class = "MonoDevelop.FSharp.FSharpCompilerParameters" />
    <DataType class = "MonoDevelop.FSharp.FSharpProjectParameters" />
  </Extension>

  <Extension path = "/MonoDevelop/ProjectModel/Gui/ItemOptionPanels/Build/General">
    <Condition id="ActiveLanguage" value="F#">
      <Panel id = "FSharpGeneralOptionsPanel" _label = "F#" class = "MonoDevelop.FSharp.GeneralOptionsPanel" insertafter=""/>
    </Condition>
  </Extension>

  <Extension path = "/MonoDevelop/ProjectModel/Gui/ItemOptionPanels/Build/Compiler">
    <Condition id="ActiveLanguage" value="F#">
      <Panel id = "FSharpCodeGenerationPanel" _label = "Compiler" class = "MonoDevelop.FSharp.CodeGenerationPanel"/>
    </Condition>
  </Extension>

  <Extension path="/MonoDevelop/Core/MimeTypes">
    <MimeType id="text/x-fsharp" _description="F# Source File" icon="md-file-source" isText="true">
      <File pattern="*.fs" />
    </MimeType>
    <MimeType id="text/x-fsharp" _description="F# Script File" icon="md-file-source" isText="true">
      <File pattern="*.fsx" />
      <File pattern="*.fsscript" />
        </MimeType>
    <MimeType id="text/x-fsharp" _description="F# Signature File" icon="md-file-header" isText="true">
      <File pattern="*.fsi" />
        </MimeType>
    <MimeType id="application/fsproject+xml" _description="F# project file" baseType="application/xml">
      <File pattern="*.fsproj" />
    </MimeType>
  </Extension>

  <Extension path="/MonoDevelop/ProjectModel/LanguageBindings">
    <LanguageBinding id="F#" supportedextensions=".fs,.fsi,.fsx,.fsscript"
                     class="MonoDevelop.FSharp.FSharpLanguageBinding" />
  </Extension>

  <Extension path = "/MonoDevelop/Ide/ReferenceFinder">
    <ReferenceFinder supportedmimetypes = "text/x-fsharp"
                     class = "MonoDevelop.FSharp.FSharpReferenceFinder" />
  </Extension>

  <Extension path = "/MonoDevelop/Ide/CodeFormatters">
    <Formatter mimeType="text/x-fsharp" class="MonoDevelop.FSharp.FSharpFormatter" />
  </Extension>

  <Extension path = "/MonoDevelop/ProjectModel/PolicySets/Mono" >
    <Policies resource="FSharpStylePolicy.xml" />
  </Extension>

  <Policies resource="FSharpFormattingPolicy.xml" />

  <Extension path = "/MonoDevelop/ProjectModel/Gui/MimeTypePolicyPanels">
    <Panel id = "FSharpFormatting" _label = "F# Formatting" mimeType="text/x-fsharp" class = "MonoDevelop.FSharp.FSharpFormattingPolicyPanel" />
  </Extension>

  <Extension path = "/MonoDevelop/Ide/TextEditorExtensions">
    <Class fileExtensions=".fs,.fsi,.fsx,.fsscript" class="MonoDevelop.FSharp.FSharpTextEditorCompletion" />
    <Class fileExtensions = ".fs,.fsx" class = "MonoDevelop.FSharp.FSharpPathExtension" />
    <Class fileExtensions = ".fs,.fsx" class = "MonoDevelop.FSharp.HighlightUsagesExtension" />
    <Class fileExtensions = ".fs" class = "MonoDevelop.FSharp.FSharpUnitTestTextEditorExtension" />
  </Extension>

  <Extension path = "/MonoDevelop/ProjectModel/ProjectServiceExtensions">
    <Class class = "MonoDevelop.FSharp.FSharpProjectServiceExtension" />
  </Extension>

  <Extension path = "/MonoDevelop/Ide/CodeTemplates">
    <CodeTemplate file="Templates/FSharp-templates.xml" />
  </Extension>

  <!-- F# interactive -->

  <Extension path="/MonoDevelop/Ide/Pads">
    <ComplexCondition>
      <Or>
        <Condition id="MSBuildTargetIsAvailable" target="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" />
        <Condition id="MSBuildTargetIsAvailable" target="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" />
      </Or>
      <Pad id="MonoDevelop.FSharp.FSharpInteractivePad" defaultPlacement="Bottom" _label="F# Interactive" icon="md-project" class="MonoDevelop.FSharp.FSharpInteractivePad" />
    </ComplexCondition>
  </Extension>

  <Extension path = "/MonoDevelop/Ide/Pads/ProjectPad">
    <NodeBuilder class = "MonoDevelop.FSharp.FSharpProjectFileNodeExtension"/>
  </Extension>

  <Extension path="/MonoDevelop/Ide/Commands">
    <ComplexCondition>
      <Or>
        <Condition id="MSBuildTargetIsAvailable" target="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" />
        <Condition id="MSBuildTargetIsAvailable" target="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" />
      </Or>
      <Category _name = "F# Integration" id="F# Integration">
        <Command id="MonoDevelop.FSharp.FSharpCommands.ShowFSharpInteractive"
            _label = "F# Interactive"
            type="check"
            _description="Show F# Interactive pad."
            shortcut="Control|Alt|F"
            macShortcut="Meta|Control|F"
            defaultHandler="MonoDevelop.FSharp.ShowFSharpInteractive" />

        <Command id="MonoDevelop.FSharp.FSharpCommands.SendSelection"
            _label = "Send selection to F# Interactive"
            _description="Send the selected text to F# Interactive"
            shortcut="Ctrl|Return"
            macShortcut="Ctrl|Return"
            defaultHandler="MonoDevelop.FSharp.SendSelection" />

        <Command id="MonoDevelop.FSharp.FSharpCommands.SendLine"
            _label = "Send line to F# Interactive"
            _description="Send the current line to F# Interactive"
            shortcut="Ctrl|Alt|L"
            macShortcut="Meta|Control|L"
            defaultHandler="MonoDevelop.FSharp.SendLine" />

        <Command _description="Send the current project references to F# Interactive"
            _label="Send references to F# Interactive"
            defaultHandler="MonoDevelop.FSharp.SendReferences"
            id="MonoDevelop.FSharp.FSharpCommands.SendReferences"
            macShortcut="Meta|Control|P"
            shortcut="Ctrl|Alt|P" />

        <Command _description="Restart F# Interactive"
            _label="Restart F# Interactive"
            defaultHandler="MonoDevelop.FSharp.RestartFsi"
            id="MonoDevelop.FSharp.FSharpCommands.RestartFsi"
            macShortcut="Meta|Control|R"
            shortcut="Ctrl|Alt|R" />

        <Command _description="Clear F# Interactive"
            _label="Clear F# Interactive"
            defaultHandler="MonoDevelop.FSharp.ClearFsi"
            id="MonoDevelop.FSharp.FSharpCommands.ClearFsi"
            macShortcut="Meta|Control|C"
            shortcut="Ctrl|Alt|C" />
      </Category>
    </ComplexCondition>
  </Extension>

  <Extension path = "/MonoDevelop/SourceEditor2/ContextMenu/Editor">
    <ComplexCondition>
      <Or>
        <Condition id="MSBuildTargetIsAvailable" target="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" />
        <Condition id="MSBuildTargetIsAvailable" target="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" />
      </Or>
      <SeparatorItem id = "FSharpInteractiveStart" />
      <CommandItem id = "MonoDevelop.FSharp.FSharpCommands.SendSelection" />
      <CommandItem id = "MonoDevelop.FSharp.FSharpCommands.SendLine" />
      <CommandItem id = "MonoDevelop.FSharp.FSharpCommands.SendReferences" />
    </ComplexCondition>
  </Extension>

  <Extension path = "/MonoDevelop/Ide/MainMenu/Edit">
    <ComplexCondition>
      <Or>
        <Condition id="MSBuildTargetIsAvailable" target="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" />
        <Condition id="MSBuildTargetIsAvailable" target="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" />
      </Or>
      <CommandItem id = "MonoDevelop.FSharp.FSharpCommands.SendSelection" />
      <CommandItem id = "MonoDevelop.FSharp.FSharpCommands.SendLine" />
      <CommandItem id = "MonoDevelop.FSharp.FSharpCommands.SendReferences" />
    </ComplexCondition>
  </Extension>

  <!--- F# Android -->
  <Module>
    <Dependencies>
      <Addin id="Xamarin.Ide" version="5.0"/>
      <Addin id="MonoAndroid" version="5.0"/>
    </Dependencies>

    <Extension path="/MonoDevelop/Ide/FileTemplates">
      <FileTemplate id= "FSharp.MonoDroidView" file ="Templates/Android/MonoDroidView.xft.xml"/>
      <FileTemplate id= "FSharp.MonoDroidActivity" file ="Templates/Android/MonoDroidActivity.xft.xml"/>
      <FileTemplate id= "FSharp.MonoDroidBroadcastReceiver" file ="Templates/Android/MonoDroidBroadcastReceiver.xft.xml"/>
      <FileTemplate id= "FSharp.MonoDroidClass" file ="Templates/Android/MonoDroidClass.xft.xml"/>
      <FileTemplate id= "FSharp.MonoDroidFragment" file ="Templates/Android/MonoDroidFragment.xft.xml"/>
      <FileTemplate id= "FSharp.MonoDroidInterface" file ="Templates/Android/MonoDroidInterface.xft.xml"/>
    </Extension>

    <Extension path="/MonoDevelop/Ide/ProjectTemplates">
      <ProjectTemplate id="FSharp.MonoDroidLibraryProject" file ="Templates/Android/MonoDroidLibraryProject.xpt.xml" />
      <ProjectTemplate id="FSharp.MonoDroidApplicationProject" file ="Templates/Android/MonoDroidApplicationProject.xpt.xml"/>
      <ProjectTemplate id="FSharp.MonoDroidApplicationLv12Project" file ="Templates/Android/MonoDroidApplicationProjectLv12.xpt.xml"/>
      <ProjectTemplate id="FSharp.MonoDroidApplicationLv15Project" file ="Templates/Android/MonoDroidApplicationProjectLv15.xpt.xml"/>
      <ProjectTemplate id="FSharp.MonoDroidOpenGLProject" file ="Templates/Android/MonoDroidOpenGLProject.xpt.xml"/>
      <ProjectTemplate id="FSharp.MonoDroidUnitTestProject" file ="Templates/Android/MonoDroidUnitTestProject.xpt.xml"/>
    </Extension>

<!--     <Extension path = "/MonoDevelop/ProjectModel/MSBuildItemTypes">
      <DotNetProjectSubtype
        guid="{F278D4AB-4730-4720-B08E-FE5E31564D9E}"
        type="MonoDevelop.MonoDroid.MonoDroidProject"
        useXBuild="true">
        <AddImport language="F#" projects="$(MSBuildExtensionsPath)\Xamarin\Android\Xamarin.Android.FSharp.targets" />
        <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\FSharp\1.0\Microsoft.FSharp.Targets" />
          <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft F#\v4.0\Microsoft.FSharp.Targets" />
          <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" />
        <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" />
      </DotNetProjectSubtype>
    </Extension> -->
    <Extension path = "/MonoDevelop/ProjectModel/MSBuildItemTypes/MonoDevelop.MonoDroid.MonoDroidProject">
      <AddImport language="F#" projects="$(MSBuildExtensionsPath)\Xamarin\Android\Xamarin.Android.FSharp.targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\FSharp\1.0\Microsoft.FSharp.Targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft F#\v4.0\Microsoft.FSharp.Targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" />
    </Extension>

  </Module>

  <!-- ios-->
  <Module>
    <Dependencies>
      <Addin id="Xamarin.Ide" version="5.0"/>
      <Addin id="MacPlatform" version="5.0"/>
      <Addin id="IPhone" version="5.0"/>
    </Dependencies>

    <Extension path="/MonoDevelop/Ide/ProjectTemplates">
      <Condition id="MonoTouchInstalled">
        <ProjectTemplate file="Templates/ios/Empty/ProjectIPad.xpt.xml"/>
        <ProjectTemplate file="Templates/ios/Empty/ProjectIPhone.xpt.xml"/>
        <ProjectTemplate file="Templates/ios/Empty/ProjectUniversal.xpt.xml"/>
        <ProjectTemplate file="Templates/ios/SingleView/ProjectIPad.xpt.xml"/>
        <ProjectTemplate file="Templates/ios/SingleView/ProjectIPhone.xpt.xml"/>
        <ProjectTemplate file="Templates/ios/SingleView/ProjectUniversal.xpt.xml"/>
        <ProjectTemplate file="Templates/ios/LibraryProject.xpt.xml"/>
      </Condition>

      <Condition id="XamarinIOSInstalled">
        <ProjectTemplate file="Templates/Xamarin.iOS/Project/Empty/ProjectIPad.xpt.xml"/>
        <ProjectTemplate file="Templates/Xamarin.iOS/Project/Empty/ProjectIPhone.xpt.xml"/>
        <ProjectTemplate file="Templates/Xamarin.iOS/Project/Empty/ProjectUniversal.xpt.xml"/>
        <ProjectTemplate file="Templates/Xamarin.iOS/Project/SingleView/ProjectIPad.xpt.xml"/>
        <ProjectTemplate file="Templates/Xamarin.iOS/Project/SingleView/ProjectIPhone.xpt.xml"/>
        <ProjectTemplate file="Templates/Xamarin.iOS/Project/SingleView/ProjectUniversal.xpt.xml"/>
        <ProjectTemplate file="Templates/Xamarin.iOS/Project/LibraryProject.xpt.xml"/>
        <ProjectTemplate file="Templates/Xamarin.iOS/Project/UnitTests/UnitTestsProject.xpt.xml"/>
        <ProjectTemplate file="Templates/Xamarin.iOS/Project/CustomKeyboardExtension/Project.xpt.xml"/>
      </Condition>
    </Extension>

    <!-- iOS Classic API -->
    <Extension path = "/MonoDevelop/ProjectModel/MSBuildItemTypes/MonoDevelop.IPhone.MonoTouchProject">
      <AddImport language="F#" projects="$(MSBuildExtensionsPath)\Xamarin\iOS\Xamarin.MonoTouch.FSharp.targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" />
    </Extension>

    <Extension path = "/MonoDevelop/ProjectModel/MSBuildItemTypes/MonoDevelop.IPhone.MonoTouchBindingProject">
      <AddImport language="F#" projects="$(MSBuildExtensionsPath)\Xamarin\Xamarin.ObjcBinding.FSharp.targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" />
    </Extension>

    <!-- iOS Unified API -->
    <Extension path = "/MonoDevelop/ProjectModel/MSBuildItemTypes/MonoDevelop.IPhone.XamarinIOSProject">
      <AddImport language="F#" projects="$(MSBuildExtensionsPath)\Xamarin\iOS\Xamarin.iOS.FSharp.targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" />
    </Extension>

    <Extension path = "/MonoDevelop/ProjectModel/MSBuildItemTypes/MonoDevelop.IPhone.XamarinIOSAppExtensionProject">
      <AddImport language="F#" projects="$(MSBuildExtensionsPath)\Xamarin\iOS\Xamarin.iOS.AppExtension.FSharp.targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" />
    </Extension>

    <Extension path = "/MonoDevelop/ProjectModel/MSBuildItemTypes/MonoDevelop.IPhone.XamarinIOSBindingProject">
      <AddImport language="F#" projects="$(MSBuildExtensionsPath)\Xamarin\Xamarin.ObjcBinding.FSharp.targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.1\Framework\v4.0\Microsoft.FSharp.Targets" />
      <RemoveImport language="F#" projects="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" />
    </Extension>

  </Module>

  <!-- MonoMac-->
  <Module>
    <Dependencies>
      <Addin id="MacDev" version="5.0"/>
      <Addin id="MacPlatform" version="5.0"/>
      <Addin id="Xamarin.Ide" version="5.0"/>
      <Addin id="MonoMac" version="5.0"/>
    </Dependencies>

    <Extension path="/MonoDevelop/Ide/FileTemplates">
      <FileTemplate id="FSharpMonoMacPlist" file="Templates/MonoMac/MonoMac/MonoMacPlist.xft.xml"/>
      <FileTemplate id="FSharpMonoMacApplicationManifest" file="Templates/MonoMac/MonoMac/MonoMacApplicationManifest.xft.xml"/>
      <FileTemplate id="FSharpMonoMacApplicationDocumentManifest" file ="Templates/MonoMac/MonoMac/MonoMacApplicationDocumentManifest.xft.xml"/>
      <FileTemplate id="FSharpMonoMacWindowWithControllerXib" file ="Templates/MonoMac/MonoMac/MonoMacWindowWithControllerXib.xft.xml"/>
      <FileTemplate id="FSharpXamMacPlist" file="Templates/MonoMac/XamMac/XamMacPlist.xft.xml"/>
      <FileTemplate id="FSharpXamMacApplicationManifest" file="Templates/MonoMac/XamMac/XamMacApplicationManifest.xft.xml"/>
      <FileTemplate id="FSharpXamMacApplicationDocumentManifest" file="Templates/MonoMac/XamMac/XamMacApplicationDocumentManifest.xft.xml"/>
      <FileTemplate id="FSharpXamMacWindowWithControllerXib" file ="Templates/MonoMac/XamMac/XamMacWindowWithControllerXib.xft.xml"/>
    </Extension>

    <Extension path="/MonoDevelop/Ide/ProjectTemplates">
      <ProjectTemplate id="FSharpMonoMacProject" file="Templates/MonoMac/MonoMac/MonoMacProject.xpt.xml"/>
      <ProjectTemplate id="FSharpMonoMacProjectEmpty" file="Templates/MonoMac/MonoMac/MonoMacProjectEmpty.xpt.xml"/>
      <ProjectTemplate id="FSharpXamMacProject" file="Templates/MonoMac/XamMac/XamMacProject.xpt.xml"/>
      <ProjectTemplate id="FSharpXamMacProjectEmpty" file="Templates/MonoMac/XamMac/XamMacProjectEmpty.xpt.xml"/>
    </Extension>
  </Module>

</Addin>
